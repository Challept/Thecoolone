<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interaktiv V√§rldskarta</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: Arial, sans-serif;
      color: #ffffff;
    }

    #map {
      width: 90%;
      height: 90%;
      border: 2px solid #ffffff;
      border-radius: 10px;
    }

    h1 {
      margin-bottom: 10px;
    }

    .popup-content {
      font-size: 1rem;
      color: #000;
    }

    .popup-content h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    .popup-content p {
      margin: 5px 0;
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-ajax"></script>
</head>
<body>
  <h1>üåç Interaktiv V√§rldskarta</h1>
  <div id="map"></div>
  <script>
    // Skapa kartan
    const map = L.map('map').setView([0, 0], 2);

    // L√§gg till OpenStreetMap som baslager
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '¬© OpenStreetMap'
    }).addTo(map);

    // Landdata (exempel)
    const countryData = {
      "Sverige": {
        military: "30 000 aktiva soldater",
        population: "10 500 000",
        area: "450 295 km¬≤",
        economy: "657 miljarder USD"
      },
      "USA": {
        military: "1 400 000 aktiva soldater",
        population: "331 000 000",
        area: "9 833 517 km¬≤",
        economy: "25,5 biljoner USD"
      },
      "Kina": {
        military: "2 000 000 aktiva soldater",
        population: "1 410 000 000",
        area: "9 596 961 km¬≤",
        economy: "17,5 biljoner USD"
      }
    };

    let selectedLayer = null; // F√∂r att sp√•ra markerat land

    // Funktion f√∂r att skapa popup med landinformation
    function getPopupContent(country) {
      if (countryData[country]) {
        const data = countryData[country];
        return `
          <div class="popup-content">
            <h2>${country}</h2>
            <p><strong>Milit√§r styrka:</strong> ${data.military}</p>
            <p><strong>Befolkning:</strong> ${data.population}</p>
            <p><strong>Area:</strong> ${data.area}</p>
            <p><strong>Ekonomi:</strong> ${data.economy}</p>
          </div>
        `;
      } else {
        return `<p>Ingen information tillg√§nglig f√∂r ${country}.</p>`;
      }
    }

    // L√§gg till GeoJSON-data (ladda fr√•n en extern fil eller API)
    const geojsonUrl = "https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson";

    // H√§mta och l√§gg till GeoJSON-lager
    L.geoJSON.ajax(geojsonUrl, {
      style: function () {
        return {
          color: "#3388ff",
          weight: 1,
          fillColor: "#3388ff",
          fillOpacity: 0.2
        };
      },
      onEachFeature: function (feature, layer) {
        const countryName = feature.properties.ADMIN;

        // Hantera h√§ndelser p√• lagret
        layer.on({
          mouseover: function (e) {
            e.target.setStyle({
              fillOpacity: 0.5
            });
          },
          mouseout: function (e) {
            if (selectedLayer !== e.target) {
              e.target.setStyle({
                fillOpacity: 0.2
              });
            }
          },
          click: function (e) {
            if (selectedLayer) {
              selectedLayer.setStyle({
                fillOpacity: 0.2,
                fillColor: "#3388ff"
              });
            }
            selectedLayer = e.target; // Uppdatera markerat lager
            e.target.setStyle({
              fillColor: "#42a5f5",
              fillOpacity: 0.7
            });

            // Visa popup med landdata
            const popup = L.popup()
              .setLatLng(e.latlng)
              .setContent(getPopupContent(countryName))
              .openOn(map);
          }
        });
      }
    }).addTo(map);
  </script>
</body>
</html>
